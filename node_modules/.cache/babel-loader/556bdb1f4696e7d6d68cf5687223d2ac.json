{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rafael.almeida\\\\Desktop\\\\Aulas - ZUP\\\\Aulas\\\\Projeto Final - Front\\\\pointmarker-front\\\\src\\\\componente\\\\page\\\\dashboard\\\\Dashboard.js\";\nimport { Tab } from \"bootstrap\";\nimport PubSub from \"pubsub-js\";\nimport react, { Component } from \"react\";\nimport { Table, Button, Form, FormGroup, Label, Input, Alert } from \"reactstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ListBancoDeHoras extends Component {\n  constructor() {\n    super(...arguments);\n\n    this.delete = id => {\n      this.props.deleteBanco(id);\n    };\n\n    this.onEdit = (bancoHoras, data) => {\n      PubSub.publish(\"edit-bancoHoras\", bancoHoras);\n    };\n  }\n\n  render() {\n    const {\n      bancoHoras\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(Table, {\n      className: \"table-bordered text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        className: \"thead- text-light \",\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Funcionario\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 29,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Dia do Trabalho\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 30,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Entrada\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 31,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Saida\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 32,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Actions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 33,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: bancoHoras.map(banco => /*#__PURE__*/_jsxDEV(\"tr\", {\n          className: \"thead-dark text-light\",\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: banco.funcionario.nome\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 39,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: banco.diaDoTrabalho\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 40,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: banco.entrada\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: banco.saida\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              color: \"info\",\n              size: \"sm\",\n              onClick: e => this.onEdit(banco, banco.diaDoTrabalho),\n              children: \"Editar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 44,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              color: \"danger\",\n              size: \"sm\",\n              onClick: e => this.delete(banco.id),\n              children: \"Deletar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 51,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 15\n          }, this)]\n        }, banco.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass FormBancoDeHoras extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      modelBanco: {\n        funcionario: {\n          cpf: \"\"\n        },\n        entrada: \"\",\n        saida: \"\",\n        diaDoTrabalho: \"\"\n      }\n    };\n\n    this.setValuesBanco = (e, field) => {\n      const {\n        modelBanco\n      } = this.state;\n      modelBanco[field] = e.target.value;\n      this.setState({\n        modelBanco\n      });\n    };\n\n    this.create = () => {\n      this.setState({\n        modelBanco: {\n          entrada: \"\",\n          saida: \"\"\n        }\n      });\n      this.props.bancoHorasCreate(this.state.modelBanco, this.state.modelBanco.diaDoTrabalho);\n    };\n  }\n\n  componentWillMount() {\n    PubSub.subscribe(\"edit-bancoHoras\", (topic, bancoHoras) => {\n      this.setState({\n        modelBanco: bancoHoras\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Form, {\n      children: [/*#__PURE__*/_jsxDEV(FormGroup, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row\",\n          children: [/*#__PURE__*/_jsxDEV(Label, {\n            for: \"funcionario\",\n            children: \"Funcionario\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            id: \"funcionario\",\n            type: \"text\",\n            value: this.state.modelBanco.funcionario.cpf,\n            onChange: e => this.setValuesBanco(e, \"funcionario\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row\",\n          children: [/*#__PURE__*/_jsxDEV(Label, {\n            for: \"entrada\",\n            children: \"Entrada\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            id: \"entrada\",\n            type: \"time\",\n            value: this.state.modelBanco.entrada,\n            onChange: e => this.setValuesBanco(e, \"entrada\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row\",\n          children: [/*#__PURE__*/_jsxDEV(Label, {\n            for: \"saida\",\n            children: \"Saida\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            id: \"saida\",\n            type: \"time\",\n            value: this.state.modelBanco.saida,\n            onChange: e => this.setValuesBanco(e, \"saida\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        color: \"danger\",\n        block: true,\n        onClick: this.onEdit,\n        children: \"Atualizar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass Dashboard extends Component {\n  constructor() {\n    super(...arguments);\n    this.url = \"http://localhost:8080/bancohoras\";\n    this.state = {\n      bancoHoras: [],\n      message: {\n        text: \"\",\n        alert: \"\"\n      }\n    };\n\n    this.onEdit = bancoHoras => {\n      let json = {\n        entrada: bancoHoras.entrada,\n        saida: bancoHoras.saida,\n        data: bancoHoras.diaDoTrabalho\n      };\n      const token = localStorage.getItem(\"token\");\n      const requestInfo = {\n        method: \"PUT\",\n        body: JSON.stringify(json),\n        headers: new Headers({\n          \"Content-type\": \"application/json\",\n          Authorization: token\n        })\n      };\n      fetch(this.url + \"/\" + json.diaDoTrabalho, requestInfo).then(response => response.json()).then(newBancoDeHoras => {\n        let {\n          bancoHoras\n        } = this.state;\n        bancoHoras.push(newBancoDeHoras);\n        this.setState({\n          bancoHoras,\n          message: {\n            text: \"BancoDeHoras atualizado com sucesso. \",\n            alert: \"success\"\n          }\n        });\n        this.timerMessage(3000);\n      }).catch(e => console.log(e));\n    };\n\n    this.timerMessage = duration => {\n      setTimeout(() => {\n        this.setState({\n          message: {\n            text: \"\",\n            alert: \"\"\n          }\n        });\n      }, duration);\n    };\n\n    this.delete = id => {\n      const token = localStorage.getItem(\"token\");\n      const requestInfo = {\n        method: \"DELETE\",\n        headers: new Headers({\n          \"Content-type\": \"application/json\",\n          Authorization: token\n        })\n      };\n      fetch(`${this.url}/${id}`, requestInfo).then(rows => {\n        const bancoHoras = this.state.bancoHoras.filter(bancoHoras => bancoHoras.id != id);\n        this.setState({\n          bancoHoras,\n          message: {\n            text: \"Banco de Horas Deletado Com Sucesso.\",\n            alert: \"danger\"\n          }\n        });\n        this.timerMessage(3000);\n      }).catch(e => console.log(e));\n    };\n  }\n\n  componentDidMount() {\n    let token = localStorage.getItem(\"token\");\n    const requestInfo = {\n      method: \"GET\",\n      headers: new Headers({\n        \"Content-type\": \"application/json\",\n        Authorization: token\n      })\n    };\n    fetch(this.url, requestInfo).then(response => response.json()).then(bancoHoras => this.setState({\n      bancoHoras\n    })).catch(e => console.log(e));\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [this.state.message.text !== \"\" ? /*#__PURE__*/_jsxDEV(Alert, {\n        color: this.state.message.alert,\n        className: \"text-center\",\n        children: this.state.message.text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 11\n      }, this) : \"\", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6 my-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"font-weight-bold text-center \",\n            children: \"ATUALIZAR BANCO DE HORAS\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormBancoDeHoras, {\n            bancoHorasCreate: this.onEdit\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6 my-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"font-weight-bold text-center \",\n            children: \"LISTA DE BANCO DE HORAS\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ListBancoDeHoras, {\n            bancoHoras: this.state.bancoHoras,\n            deleteBanco: this.delete\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Dashboard;","map":{"version":3,"sources":["C:/Users/rafael.almeida/Desktop/Aulas - ZUP/Aulas/Projeto Final - Front/pointmarker-front/src/componente/page/dashboard/Dashboard.js"],"names":["Tab","PubSub","react","Component","Table","Button","Form","FormGroup","Label","Input","Alert","ListBancoDeHoras","delete","id","props","deleteBanco","onEdit","bancoHoras","data","publish","render","map","banco","funcionario","nome","diaDoTrabalho","entrada","saida","e","FormBancoDeHoras","state","modelBanco","cpf","setValuesBanco","field","target","value","setState","create","bancoHorasCreate","componentWillMount","subscribe","topic","Dashboard","url","message","text","alert","json","token","localStorage","getItem","requestInfo","method","body","JSON","stringify","headers","Headers","Authorization","fetch","then","response","newBancoDeHoras","push","timerMessage","catch","console","log","duration","setTimeout","rows","filter","componentDidMount"],"mappings":"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","sourcesContent":["import { Tab } from \"bootstrap\";\r\nimport PubSub from \"pubsub-js\";\r\nimport react, { Component } from \"react\";\r\nimport {\r\n  Table,\r\n  Button,\r\n  Form,\r\n  FormGroup,\r\n  Label,\r\n  Input,\r\n  Alert,\r\n} from \"reactstrap\";\r\n\r\nclass ListBancoDeHoras extends Component {\r\n  delete = (id) => {\r\n    this.props.deleteBanco(id);\r\n  };\r\n\r\n  onEdit = (bancoHoras, data) => {\r\n    PubSub.publish(\"edit-bancoHoras\", bancoHoras);\r\n  };\r\n\r\n  render() {\r\n    const { bancoHoras } = this.props;\r\n    return (\r\n      <Table className=\"table-bordered text-center\">\r\n        <thead className=\"thead- text-light \">\r\n          <tr>\r\n            <th>Funcionario</th>\r\n            <th>Dia do Trabalho</th>\r\n            <th>Entrada</th>\r\n            <th>Saida</th>\r\n            <th>Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {bancoHoras.map((banco) => (\r\n            <tr key={banco.id} className=\"thead-dark text-light\">\r\n              <td>{banco.funcionario.nome}</td>\r\n              <td>{banco.diaDoTrabalho}</td>\r\n              <td>{banco.entrada}</td>\r\n              <td>{banco.saida}</td>\r\n              <td>\r\n                <Button\r\n                  color=\"info\"\r\n                  size=\"sm\"\r\n                  onClick={(e) => this.onEdit(banco, banco.diaDoTrabalho)}\r\n                >\r\n                  Editar\r\n                </Button>\r\n                <Button\r\n                  color=\"danger\"\r\n                  size=\"sm\"\r\n                  onClick={(e) => this.delete(banco.id)}\r\n                >\r\n                  Deletar\r\n                </Button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </Table>\r\n    );\r\n  }\r\n}\r\n\r\nclass FormBancoDeHoras extends Component {\r\n  state = {\r\n    modelBanco: {\r\n      funcionario: {\r\n        cpf: \"\",\r\n      },\r\n      entrada: \"\",\r\n      saida: \"\",\r\n      diaDoTrabalho: \"\",\r\n    },\r\n  };\r\n\r\n  componentWillMount() {\r\n    PubSub.subscribe(\"edit-bancoHoras\", (topic, bancoHoras) => {\r\n      this.setState({ modelBanco: bancoHoras });\r\n    });\r\n  }\r\n\r\n  setValuesBanco = (e, field) => {\r\n    const { modelBanco } = this.state;\r\n    modelBanco[field] = e.target.value;\r\n    this.setState({ modelBanco });\r\n  };\r\n\r\n  create = () => {\r\n    this.setState({ modelBanco: { entrada: \"\", saida: \"\" } });\r\n    this.props.bancoHorasCreate(\r\n      this.state.modelBanco,\r\n      this.state.modelBanco.diaDoTrabalho\r\n    );\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Form>\r\n        <FormGroup>\r\n          <div className=\"form-row\">\r\n            <Label for=\"funcionario\">Funcionario</Label>\r\n            <Input\r\n              id=\"funcionario\"\r\n              type=\"text\"\r\n              value={this.state.modelBanco.funcionario.cpf}\r\n              onChange={(e) => this.setValuesBanco(e, \"funcionario\")}\r\n            />\r\n          </div>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <div className=\"form-row\">\r\n            <Label for=\"entrada\">Entrada</Label>\r\n            <Input\r\n              id=\"entrada\"\r\n              type=\"time\"\r\n              value={this.state.modelBanco.entrada}\r\n              onChange={(e) => this.setValuesBanco(e, \"entrada\")}\r\n            />\r\n          </div>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <div className=\"form-row\">\r\n            <Label for=\"saida\">Saida</Label>\r\n            <Input\r\n              id=\"saida\"\r\n              type=\"time\"\r\n              value={this.state.modelBanco.saida}\r\n              onChange={(e) => this.setValuesBanco(e, \"saida\")}\r\n            />\r\n          </div>\r\n        </FormGroup>\r\n        <Button color=\"danger\" block onClick={this.onEdit}>\r\n          Atualizar\r\n        </Button>\r\n      </Form>\r\n    );\r\n  }\r\n}\r\n\r\nclass Dashboard extends Component {\r\n  url = \"http://localhost:8080/bancohoras\";\r\n\r\n  state = {\r\n    bancoHoras: [],\r\n    message: {\r\n      text: \"\",\r\n      alert: \"\",\r\n    },\r\n  };\r\n\r\n  componentDidMount() {\r\n    let token = localStorage.getItem(\"token\");\r\n    const requestInfo = {\r\n      method: \"GET\",\r\n      headers: new Headers({\r\n        \"Content-type\": \"application/json\",\r\n        Authorization: token,\r\n      }),\r\n    };\r\n    fetch(this.url, requestInfo)\r\n      .then((response) => response.json())\r\n      .then((bancoHoras) => this.setState({ bancoHoras }))\r\n      .catch((e) => console.log(e));\r\n  }\r\n\r\n  onEdit = (bancoHoras) => {\r\n    let json = {\r\n      entrada: bancoHoras.entrada,\r\n      saida: bancoHoras.saida,\r\n      data: bancoHoras.diaDoTrabalho,\r\n    };\r\n\r\n    const token = localStorage.getItem(\"token\");\r\n    const requestInfo = {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(json),\r\n      headers: new Headers({\r\n        \"Content-type\": \"application/json\",\r\n        Authorization: token,\r\n      }),\r\n    };\r\n    fetch(this.url + \"/\" + json.diaDoTrabalho, requestInfo)\r\n      .then((response) => response.json())\r\n      .then((newBancoDeHoras) => {\r\n        let { bancoHoras } = this.state;\r\n        bancoHoras.push(newBancoDeHoras);\r\n        this.setState({\r\n          bancoHoras,\r\n          message: {\r\n            text: \"BancoDeHoras atualizado com sucesso. \",\r\n            alert: \"success\",\r\n          },\r\n        });\r\n        this.timerMessage(3000);\r\n      })\r\n      .catch((e) => console.log(e));\r\n  };\r\n\r\n  timerMessage = (duration) => {\r\n    setTimeout(() => {\r\n      this.setState({ message: { text: \"\", alert: \"\" } });\r\n    }, duration);\r\n  };\r\n\r\n  delete = (id) => {\r\n    const token = localStorage.getItem(\"token\");\r\n    const requestInfo = {\r\n      method: \"DELETE\",\r\n      headers: new Headers({\r\n        \"Content-type\": \"application/json\",\r\n        Authorization: token,\r\n      }),\r\n    };\r\n    fetch(`${this.url}/${id}`, requestInfo)\r\n      .then((rows) => {\r\n        const bancoHoras = this.state.bancoHoras.filter(\r\n          (bancoHoras) => bancoHoras.id != id\r\n        );\r\n        this.setState({\r\n          bancoHoras,\r\n          message: {\r\n            text: \"Banco de Horas Deletado Com Sucesso.\",\r\n            alert: \"danger\",\r\n          },\r\n        });\r\n        this.timerMessage(3000);\r\n      })\r\n      .catch((e) => console.log(e));\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        {this.state.message.text !== \"\" ? (\r\n          <Alert color={this.state.message.alert} className=\"text-center\">\r\n            {this.state.message.text}\r\n          </Alert>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        <div className=\"row\">\r\n          <div className=\"col-md-6 my-3\">\r\n            <h2 className=\"font-weight-bold text-center \">\r\n              ATUALIZAR BANCO DE HORAS\r\n            </h2>\r\n            <FormBancoDeHoras bancoHorasCreate={this.onEdit} />\r\n          </div>\r\n          <div className=\"col-md-6 my-3\">\r\n            <h2 className=\"font-weight-bold text-center \">\r\n              LISTA DE BANCO DE HORAS\r\n            </h2>\r\n            <ListBancoDeHoras\r\n              bancoHoras={this.state.bancoHoras}\r\n              deleteBanco={this.delete}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Dashboard;\r\n"]},"metadata":{},"sourceType":"module"}